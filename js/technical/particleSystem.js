const particles={};let particleID=0,mouseX=0,mouseY=0;function makeParticles(e,t=1,i="normal"){for(let a=0;a<t;a++){const n=newParticles[i]();for(const t in e)switch(t){case"onClick":case"onMouseEnter":case"onMouseLeave":case"update":n[t]=e[t];break;default:n[t]=run(e[t],e,a)}void 0===e.dir&&(n.dir=n.angle),n.dir+=n.spread*(a-t/2+.5),n.offset&&(n.x+=n.offset*sin(n.dir),n.y+=n.offset*cos(n.dir)*-1),n.xVel=n.speed*sin(n.dir),n.yVel=n.speed*cos(n.dir)*-1,n.fadeInTimer=n.fadeInTime,Vue.set(particles,n.id,n)}}function makeShinies(e,t=1){makeParticles(e,t,"shiny")}function updateParticles(e){for(const t in particles){const i=particles[t];if(i.time-=e,i.fadeInTimer-=e,i.time<0)return void Vue.delete(particles,t);i.update?.(),i.angle+=i.rotation,i.x+=i.xVel,i.y+=i.yVel,i.speed=Math.sqrt(Math.pow(i.xVel,2)+Math.pow(i.yVel,2)),i.dir=atan(-i.xVel/i.yVel),i.yVel+=i.gravity}}function setDir(e,t){e.dir=t,e.xVel=e.speed*sin(e.dir),e.yVel=e.speed*cos(e.dir)*-1}function setSpeed(e,t){e.speed=t,e.xVel=e.speed*sin(e.dir),e.yVel=e.speed*cos(e.dir)*-1}const newParticles={normal:()=>(particleID++,{time:3,id:particleID,x:mouseX,y:mouseY,width:35,height:35,image:"resources/genericParticle.png",angle:0,spread:30,offset:10,speed:15,xVel:0,yVel:0,rotation:0,gravity:0,fadeOutTime:1,fadeInTimer:0,fadeInTime:0}),shiny:()=>(particleID++,{time:10,id:particleID,x:Math.random()*(tmp.other.screenWidth-100)+50,y:Math.random()*(tmp.other.screenHeight-100)+50,width:50,height:50,image:"resources/genericParticle.png",angle:0,spread:0,offset:0,speed:0,xVel:0,yVel:0,rotation:0,gravity:0,fadeOutTime:1,fadeInTimer:0,fadeInTime:.5})};function updateMouse(e){mouseX=e.clientX,mouseY=e.clientY}function getOpacity(e){return e.time<e.fadeOutTime&&e.fadeOutTime?e.time/e.fadeOutTime:e.fadeInTimer>0?1-e.fadeInTimer/e.fadeInTime:1}function constructParticleStyle(e){const t={left:e.x-e.height/2+"px",top:e.y-e.height/2+"px",width:e.width+"px",height:e.height+"px",transform:"rotate("+e.angle+"deg)",opacity:getOpacity(e),"pointer-events":e.onClick||e.onHover?"auto":"none"};return e.color?(t["background-color"]=e.color,t.mask="url(#pmask"+e.id+")",t["-webkit-mask-box-image"]="url("+e.image+")"):t["background-image"]="url("+e.image+")",t}function clearParticles(e=!0){for(const t in particles)run(e,particles[t],particles[t])&&Vue.delete(particles,t)}function sin(e){return Math.sin(e*Math.PI/180)}function cos(e){return Math.cos(e*Math.PI/180)}function tan(e){return Math.tan(e*Math.PI/180)}function asin(e){return 180*Math.asin(e)/Math.PI}function acos(e){return 180*Math.acos(e)/Math.PI}function atan(e){return 180*Math.atan(e)/Math.PI}
